(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(e,a,t){e.exports=t(78)},32:function(e,a,t){},38:function(e,a,t){},78:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),s=t(13),i=t.n(s),r=(t(32),t(26)),c=t(4),o=t(5),m=t(8),u=t(6),d=t(7),g=t(2),f=(t(34),t(36),t(38),t(9)),h=t.n(f),p=t(16),v=t(14),b=t(25),y=t.n(b),_=function(e){function a(e){return Object(c.a)(this,a),Object(m.a)(this,Object(u.a)(a).call(this,e))}return Object(d.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){var e=this.props,a=e.galleryImagesJSON,t=e.removeImage,n=e.handleGalleryImageClick,s=a.map(function(e,a){return l.a.createElement("div",{key:a,className:"gallery-img fadein"},1===e.delete?l.a.createElement("div",{onClick:function(){return t(e.id)},className:"delete"},l.a.createElement(p.a,{icon:v.b,size:"1x",color:"red"})):l.a.createElement("div",{className:"delete-none"},l.a.createElement(p.a,{icon:v.a,size:"1x",color:"green"})),l.a.createElement("img",{className:"image-thumb",onClick:n,id:e.id,src:e.full_path}))});return l.a.createElement(y.a,{dots:!1,infinite:!0,speed:500,slidesToShow:4,slidesToScroll:1},s)}}]),a}(n.Component),E=function(e){return l.a.createElement("div",{style:{backgroundColor:"#efefef"}},l.a.createElement("div",{className:"message-uploader"},l.a.createElement("h6",null,e.messageUploader)),l.a.createElement("form",{onSubmit:e.onFormSubmit,id:"face-image-uploader"},l.a.createElement("input",{type:"file",onChange:e.onChange}),l.a.createElement("button",{type:"submit"},"Upload")))},j=function(e){return l.a.createElement("div",{className:"image-main-container"},l.a.createElement("img",{className:"image-main fadein-image-main",src:e.imageMainSource}))},O=function(e){function a(e){return Object(c.a)(this,a),Object(m.a)(this,Object(u.a)(a).call(this,e))}return Object(d.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.imageAnalyzeResult.map(function(e,a){return console.log(e),l.a.createElement("div",{key:a,className:"row"},l.a.createElement("div",{className:"col-sm-2"}),l.a.createElement("div",{className:"col-sm-8"},l.a.createElement("h3",null,"Result"),l.a.createElement("div",null,l.a.createElement("p",null,"FaceId: ",e.faceId),l.a.createElement("p",null,"Age: ",e.faceAttributes.age))),l.a.createElement("div",{className:"col-sm-2"}))});return l.a.createElement("div",null,e)}}]),a}(n.Component),k=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(m.a)(this,Object(u.a)(a).call(this,e))).removeImage=function(e){var a=Object(g.a)(Object(g.a)(t)),n="https://leadtactic.com/api/face-image/"+e;h.a.delete(n,{headers:{"Access-Control-Allow-Origin":"*","content-type":"application/x-www-form-urlencoded"}}).then(function(t){if(t.data.data.length<1)console.log("delete: failure in removeImage()");else if(console.log(t.data.data[0].msg),"deleted"==t.data.data[0].msg){var n=a.state.gallery_images_json.filter(function(a){return a.id!==e}),l=n[0].full_path;a.setState({gallery_images_json:n,image_main_source:l})}}).catch(function(e){return a.setState({error:e})})},t.state={gallery_images_json:[],gallery_images_found:!1,file:null,uploading:!1,image_main_source:"",message_uploader:"",image_analyze_result:[]},t.onFormSubmit=t.onFormSubmit.bind(Object(g.a)(Object(g.a)(t))),t.onChange=t.onChange.bind(Object(g.a)(Object(g.a)(t))),t.fileUpload=t.fileUpload.bind(Object(g.a)(Object(g.a)(t))),t.handleGalleryImageClick=t.handleGalleryImageClick.bind(Object(g.a)(Object(g.a)(t))),t.analyzeImage=t.analyzeImage.bind(Object(g.a)(Object(g.a)(t))),t}return Object(d.a)(a,e),Object(o.a)(a,[{key:"componentDidMount",value:function(){this.refreshGallery()}},{key:"refreshGallery",value:function(){var e=this;h.a.get("https://leadtactic.com/api/face-gallery").then(function(a){if(a.data.data.length<1)e.setState({gallery_images_found:!1,image_main_source:""});else{var t=a.data.data[0].full_path;e.setState({gallery_images_found:!0,image_main_source:t})}e.setState({gallery_images_json:a.data.data})}).catch(function(a){return e.setState({error:a})})}},{key:"setResetMessageUploader",value:function(e,a){var t=this;this.setState({message_uploader:e});setTimeout(function(){t.setState({message_uploader:""})},a)}},{key:"onFormSubmit",value:function(e){var a=this;e.preventDefault(),null!=this.state.file||void 0!=this.state.file?(this.fileUpload(this.state.file).then(function(e){console.log(e.data),a.setState({file:null,uploading:!1,gallery_images_json:Object(r.a)(a.state.gallery_images_json).concat([e.data.data]),image_main_source:e.data.data.full_path})}),this.setResetMessageUploader("Image Uploaded Success",3e3),e.target.reset()):this.setResetMessageUploader('No image selected, click "Choose File".',3e3)}},{key:"onChange",value:function(e){var a=e.target.files[0];if(["image/png","image/jpeg","image/gif"].every(function(e){return a.type!==e}))this.setResetMessageUploader("Not a supported format",3e3);else{a.size>5e6?this.setResetMessageUploader("Image too large, must be less than 5000000 MB.",3e3):this.setState({file:a})}}},{key:"fileUpload",value:function(e){this.setState({uploading:!0});var a=new FormData;a.append("file_img_faces",e);return h.a.post("https://leadtactic.com/face-image-uploader",a,{headers:{"Access-Control-Allow-Origin":"*","content-type":"application/x-www-form-urlencoded"}})}},{key:"handleGalleryImageClick",value:function(e){var a=e.target.id,t=this.state.gallery_images_json.filter(function(e){if(e.id==a)return e});console.log(t[0].full_path),this.setState({image_main_source:t[0].full_path})}},{key:"analyzeImage",value:function(){var e={url:this.state.image_main_source},a={headers:{"Content-Type":"application/json","Ocp-Apim-Subscription-Key":"71122c33d60d4284bf612e69f3c61092"},params:{returnFaceId:"true",returnFaceLandmarks:"false",returnFaceAttributes:"age,gender,headPose,smile,facialHair,glasses,emotion,hair,makeup,occlusion,accessories,blur,exposure,noise"}},t=this;h.a.post("https://eastus2.api.cognitive.microsoft.com/face/v1.0/detect",e,a).then(function(e){"OK"==e.statusText?(console.log(e.data[0]),void 0!=e.data[0]?(console.log("Have FAceI"),t.setState({image_analyze_result:e.data})):t.setResetMessageUploader("No facial image detected!",3e3)):(console.log("In Failure"),t.setResetMessageUploader("Image was not able to be processed!",3e3))}).catch(function(e){return t.setState({error:e})})}},{key:"render",value:function(){return l.a.createElement("div",{style:{margin:0,padding:0}},l.a.createElement("div",{className:"pt-4"}),l.a.createElement("div",{className:"container-fluid"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-1"}),l.a.createElement("div",{className:"col-sm-5"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-1"}),l.a.createElement("div",{className:"col-sm-10"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-sm-8"},l.a.createElement("h3",null,"Image Main"),l.a.createElement(j,{imageMainSource:this.state.image_main_source})),l.a.createElement("div",{className:"col-sm-2"},l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("button",{onClick:this.analyzeImage},"Analyze"))),l.a.createElement("h3",null,"ImageGallery"),l.a.createElement(_,{galleryImagesJSON:this.state.gallery_images_json,removeImage:this.removeImage,handleGalleryImageClick:this.handleGalleryImageClick}),l.a.createElement("div",{className:"clear-both"}),l.a.createElement("h3",null,"Image Uploader"),l.a.createElement(E,{onFormSubmit:this.onFormSubmit,onChange:this.onChange,messageUploader:this.state.message_uploader})),l.a.createElement("div",{className:"col-sm-1"}))),l.a.createElement("div",{className:"col-sm-5"},l.a.createElement(O,{imageAnalyzeResult:this.state.image_analyze_result})),l.a.createElement("div",{className:"col-sm-1"}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[27,2,1]]]);
//# sourceMappingURL=main.3faf1f5d.chunk.js.map